{"version":3,"file":"component---src-pages-download-index-jsx-55be3285fa562d522996.js","mappings":"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","sources":["webpack://crown-website/./node_modules/gatsby-plugin-google-gtag/index.js","webpack://crown-website/./src/pages/download/index.jsx"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.OutboundLink = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _excluded = [\"children\"];\n\nvar OutboundLink = /*#__PURE__*/_react.default.forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      props = (0, _objectWithoutPropertiesLoose2.default)(_ref, _excluded);\n  return /*#__PURE__*/_react.default.createElement(\"a\", (0, _extends2.default)({\n    ref: ref\n  }, props, {\n    onClick: function onClick(e) {\n      if (typeof props.onClick === \"function\") {\n        props.onClick(e);\n      }\n\n      var redirect = true;\n\n      if (e.button !== 0 || e.altKey || e.ctrlKey || e.metaKey || e.shiftKey || e.defaultPrevented) {\n        redirect = false;\n      }\n\n      if (props.target && props.target.toLowerCase() !== \"_self\") {\n        redirect = false;\n      }\n\n      if (window.gtag) {\n        window.gtag(\"event\", \"click\", {\n          event_category: \"outbound\",\n          event_label: props.href,\n          transport_type: redirect ? \"beacon\" : \"\",\n          event_callback: function event_callback() {\n            if (redirect) {\n              document.location = props.href;\n            }\n          }\n        });\n      } else {\n        if (redirect) {\n          document.location = props.href;\n        }\n      }\n\n      return false;\n    }\n  }), children);\n});\n\nexports.OutboundLink = OutboundLink;\nOutboundLink.propTypes = {\n  href: _propTypes.default.string,\n  target: _propTypes.default.string,\n  onClick: _propTypes.default.func\n};","import { OutboundLink } from \"gatsby-plugin-google-gtag\"\nimport React, { useEffect, useState } from \"react\"\nimport Layout from \"../../components/layout\"\nimport Clamp from \"../../components/clamp\"\nimport Seo from \"../../components/seo\"\nimport Releases from \"../../data/download/releases.json\"\n\nexport default function Download() {\n  const [crown_version, setCrownVersion] = useState()\n  const [crown_download_url, setCrownDownloadUrl] = useState()\n  const [crown_package_type, setCrownPackageType] = useState()\n  const [crown_download_size, setCrownDownloadSize] = useState()\n  const [crown_release, setCrownRelease] = useState()\n\n  /* https://stackoverflow.com/questions/38241480/detect-macos-ios-windows-android-and-linux-os-with-js */\n  function getUserOS() {\n    var userAgent = window.navigator.userAgent,\n      platform = window.navigator.platform,\n      macosPlatforms = [\"Macintosh\", \"MacIntel\", \"MacPPC\", \"Mac68K\"],\n      windowsPlatforms = [\"Win32\", \"Win64\", \"Windows\", \"WinCE\"],\n      iosPlatforms = [\"iPhone\", \"iPad\", \"iPod\"],\n      os = null\n\n    if (macosPlatforms.indexOf(platform) !== -1) os = \"osx\"\n    else if (iosPlatforms.indexOf(platform) !== -1) os = \"ios\"\n    else if (windowsPlatforms.indexOf(platform) !== -1) os = \"windows\"\n    else if (/Android/.test(userAgent)) os = \"android\"\n    else if (!os && /Linux/.test(platform)) os = \"linux\"\n\n    return os\n  }\n\n  function getOSName(os) {\n    if (os === \"android\") return \"Android\"\n    else if (os === \"linux\") return \"Linux\"\n    else if (os === \"osx\") return \"MacOS X\"\n    else if (os === \"windows\") return \"Windows\"\n    else return \"Unknown OS\"\n  }\n\n  function getArchName(arch) {\n    if (arch === \"arm\") return \"ARM\"\n    else if (arch === \"arm64\") return \"ARM64\"\n    else if (arch === \"x64\") return \"x64\"\n    else return arch\n  }\n\n  function getPackageType(package_name) {\n    const ext = package_name.substring(package_name.lastIndexOf(\".\") + 1\n      , package_name.length)\n      || package_name\n\n    if (ext === \"gz\") return \"Tarball\"\n    else if (ext === \"zip\") return \"ZIP\"\n    else if (ext === \"exe\") return \"Installer\"\n    else return \"Binary\"\n  }\n\n  function getPackageOS(package_name) {\n    const tags = package_name.split(\"-\")\n    return getOSName(tags[2])\n  }\n\n  function getPackageArch(package_name) {\n    const tags = package_name.split(\"-\")\n    var arch_and_extensions = tags[3]\n    var arch = arch_and_extensions.substring(0, tags[3].indexOf(\".\"))\n    return getArchName(arch)\n  }\n\n  function listSeparator() {\n    return <div className=\"flex-1 border-b-2 border-b-gray-600\"></div>;\n  }\n\n  function downloadEntries() {\n    var lastOS = \"\"\n    var urlSizeList = Releases[0].assets.map(function(data) {\n      var separator = lastOS !== \"\" && lastOS !== getPackageOS(data.name)\n      lastOS = getPackageOS(data.name)\n      var valid = lastOS !== \"Unknown OS\";\n\n      return {\n        valid: valid,\n        os: valid ? getPackageOS(data.name) : \"\",\n        arch: valid ? getPackageArch(data.name) : \"\",\n        url: data.browser_download_url,\n        size: data.size,\n        separator: separator,\n        order: 0\n      };\n    });\n\n    urlSizeList.push({\n      valid: true,\n      os: \"Linux\",\n      arch: \"x64\",\n      url: \"https://aur.archlinux.org/packages/crown\",\n      size: 0,\n      separator: false,\n      alt: \"AUR\",\n      order: 1\n    });\n\n    urlSizeList.sort(function(a, b) {\n        if (a.os < b.os) {\n          return -1;\n        }\n        if (a.os > b.os) {\n          return 1;\n        }\n\n        if (a.order < b.order) {\n          return -1;\n        }\n        if (a.order > b.order) {\n          return 1;\n        }\n\n        return 0;\n      });\n\n    return urlSizeList.map((data, index) => {\n      return (\n        <>\n          {data.valid && data.separator && listSeparator()}\n          {data.valid &&\n            <OutboundLink\n              rel=\"noreferrer\"\n              target=\"_blank\"\n              href={data.url}\n            >\n              <div className=\"px-4 py-2 flex flex-row text-left bg-gray-800 hover:bg-gray-700 rounded-sm\">\n                <div className=\"mr-2 flex-none w-6 h-6 text-gray-500\">\n                  <i className={\"fab fa-\" + data.os.toLowerCase()}></i>\n                </div>\n                <div className=\"flex-1\">\n                  {data.os} <span className=\"text-gray-600\">{data.arch}</span>\n                </div>\n                <div className=\"flex-1 text-right\">\n                  {data.alt != null && data.alt}\n                  {data.alt == null && Math.floor(data.size / 1024 / 1024) + \" MiB, \" + getPackageType(data.url)}\n                </div>\n              </div>\n            </OutboundLink>\n          }\n        </>\n      )\n    })\n  }\n\n  useEffect(() => {\n    function setDownloadDetails(github_assets) {\n      // Get details for Windows version by default because market share.\n      var os = getUserOS()\n      if (os !== \"linux\" && os !== \"windows\") os = \"windows\"\n\n      for (const asset of github_assets) {\n        if (asset.name.indexOf(os) !== -1) {\n          const url = asset.browser_download_url\n          setCrownDownloadUrl(url)\n          setCrownPackageType(getPackageType(url))\n          const megs = Math.floor(asset.size / 1024 / 1024)\n          setCrownDownloadSize(megs.toString() + \" MiB\")\n          setCrownRelease(getOSName(os))\n        }\n      }\n    }\n\n    setCrownVersion(Releases[0].tag_name)\n    setDownloadDetails(Releases[0].assets)\n  }, [])\n\n  return (\n    <Layout>\n      <Seo title=\"Download\" />\n      <div className=\"bg-[url('../images/index/luna-background.svg')] bg-left-top bg-cover py-16\">\n      <Clamp>\n      <section className=\"py-12 px-4 text-center\">\n        <div className=\"w-full max-w-2xl mx-auto\">\n          <h1 className=\"text-5xl text-center mt-2 mb-10 leading-tight font-semibold text-gray-200\">\n            Let Your Game Begin\n          </h1>\n\n          <div className=\"text-2xl\">\n            <OutboundLink\n              className=\"inline-block py-4 px-8 mb-2 leading-none text-gray-200 hover:text-white dark:text-black bg-indigo-600 hover:bg-indigo-700 dark:bg-indigo-500 dark:hover:bg-indigo-400 rounded shadow\"\n              rel=\"noreferrer\"\n              target=\"_blank\"\n              href={crown_download_url}\n            >\n              Download Crown {crown_version}\n            </OutboundLink>\n          </div>\n\n          <div className=\"mb-10\">\n            <ul className=\"flex space-x-2 justify-center text-lg\">\n              <li className=\"text-gray-200\">\n                {crown_release} {crown_package_type}\n              </li>\n              <li className=\"text-gray-200\">•</li>\n              <li className=\"text-gray-200\">\n                {crown_download_size}\n              </li>\n              <li className=\"text-gray-200\">•</li>\n              <li>\n                <a\n                  className=\"text-gray-200 hover:underline font-bold\"\n                  rel=\"noreferrer\"\n                  target=\"_blank\"\n                  href=\"https://docs.crownengine.org/html/latest/changelog.html\"\n                >\n                  What's New?\n                </a>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </section>\n\n      {/* All Versions */}\n      <section className=\"w-3/4 lg:w-1/2 mx-auto\">\n        <h2 className=\"text-xl text-center mt-2 mb-10 leading-tight font-semibold text-gray-200\">\n          Other Platforms and Versions\n        </h2>\n        <div className=\"px-4 py-4 bg-gray-800 rounded-lg shadow-lg flex flex-col space-y-2 text-gray-200 font-bold\">\n            { downloadEntries() }\n            { listSeparator() }\n            {\n              <OutboundLink\n                rel=\"noreferrer\"\n                target=\"_blank\"\n                href={Releases[0].tarball_url}\n              >\n                <div className=\"px-4 py-2 flex flex-row text-left bg-gray-800 hover:bg-gray-700 rounded-sm\">\n                  <div className=\"mr-2 flex-none w-6 h-6 text-gray-500\">\n                    <i className=\"mr-2 fas fa-code\"></i>\n                  </div>\n                  <div className=\"flex-1 text-left\">\n                    Source Code\n                  </div>\n                  <div className=\"flex-1 text-right\">\n                    {getPackageType(\"gz\")}\n                  </div>\n                </div>\n              </OutboundLink>\n            }\n            {\n              <OutboundLink\n                rel=\"noreferrer\"\n                target=\"_blank\"\n                href={Releases[0].zipball_url}\n              >\n                <div className=\"px-4 py-2 flex flex-row text-left bg-gray-800 hover:bg-gray-700 rounded-sm\">\n                  <div className=\"mr-2 flex-none w-6 h-6 text-gray-500\">\n                    <i className=\"mr-2 fas fa-code\"></i>\n                  </div>\n                  <div className=\"flex-1 text-left\">\n                    Source Code\n                  </div>\n                  <div className=\"flex-1 text-right\">\n                    {getPackageType(\"zip\")}\n                  </div>\n                </div>\n              </OutboundLink>\n            }\n        </div>\n      </section>\n      </Clamp>\n      </div>\n    </Layout>\n  )\n}\n"],"names":["_interopRequireDefault","require","exports","_extends2","_objectWithoutPropertiesLoose2","_react","_propTypes","_excluded","OutboundLink","default","forwardRef","_ref","ref","children","props","createElement","onClick","e","redirect","button","altKey","ctrlKey","metaKey","shiftKey","defaultPrevented","target","toLowerCase","window","gtag","event_category","event_label","href","transport_type","event_callback","document","location","propTypes","string","func","Download","lastOS","urlSizeList","useState","crown_version","setCrownVersion","crown_download_url","setCrownDownloadUrl","crown_package_type","setCrownPackageType","crown_download_size","setCrownDownloadSize","crown_release","setCrownRelease","getOSName","os","getPackageType","package_name","ext","substring","lastIndexOf","length","getPackageOS","split","listSeparator","className","useEffect","Releases","github_assets","userAgent","navigator","platform","indexOf","test","getUserOS","asset","name","url","browser_download_url","megs","Math","floor","size","toString","setDownloadDetails","title","rel","data","arch","tags","separator","valid","order","push","alt","sort","a","b","map","index"],"sourceRoot":""}